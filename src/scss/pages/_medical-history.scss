// ==========================================================================
// PÁGINA: MEDICAL HISTORY
// ==========================================================================

.medical-history-container {
  min-height: 100vh;
  background: $gradient-secondary;
  @include flex(column);
}

.medical-history-content {
  max-width: 800px;
  margin: 2rem auto;
  background: white;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  flex: 1;
}

.medical-form {
  padding: $spacing-xl;
  
  .section {
    margin-bottom: $spacing-xxl;
    
    h3 {
      @include flex(row, flex-start, center);
      gap: $spacing-sm;
      color: $text-primary;
      font-size: $font-size-xl;
      margin: 0 0 $spacing-xl 0;
      font-weight: $font-weight-semibold;
    }
  }
  
  .questions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: $spacing-lg;
    
    @include mobile {
      grid-template-columns: 1fr;
      gap: $spacing-md;
    }
    
    .question-block {
      @include card;
      background: $gray-100;
      border-left: 4px solid $primary-color;
      padding: $spacing-md; // Menos padding que el card por defecto
      
      &.full-width {
        grid-column: 1 / -1;
      }
      
      h3 {
        color: $text-primary;
        font-size: $font-size-lg;
        font-weight: $font-weight-semibold;
        margin-bottom: $spacing-md;
        line-height: 1.4;
      }
      
      .radio-group {
        @include flex(row, flex-start, center, wrap);
        gap: $spacing-lg;
        margin-bottom: $spacing-lg;
        
        @include mobile {
          @include flex(column, flex-start, stretch);
          gap: $spacing-md;
        }
        
        .radio-option {
          @include flex(row, flex-start, center);
          gap: $spacing-md;
          cursor: pointer;
          padding: $spacing-md;
          border: 2px solid $border-color;
          border-radius: $border-radius-md;
          @include transition(all);
          position: relative;
          min-width: 120px;
          
          &:hover {
            border-color: $primary-color;
            background: rgba($primary-color, 0.05);
          }
          
          // Ocultar el radio button nativo
          input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
          }
          
          // Radio button custom más grande
          .radio-custom {
            width: 28px;
            height: 28px;
            border: 3px solid $gray-400;
            border-radius: 50%;
            @include flex(center, center);
            @include transition(all);
            flex-shrink: 0;
            
            &:after {
              content: '';
              width: 14px;
              height: 14px;
              border-radius: 50%;
              background: $primary-color;
              opacity: 0;
              transform: scale(0);
              @include transition(all);
            }
          }
          
          // Estado seleccionado
          input[type="radio"]:checked + .radio-custom {
            border-color: $primary-color;
            
            &:after {
              opacity: 1;
              transform: scale(1);
            }
          }
          
          // Estado seleccionado del contenedor
          input[type="radio"]:checked {
            & ~ {
              border-color: $primary-color;
              background: rgba($primary-color, 0.1);
            }
          }
          
          // Efecto cuando el contenedor tiene el radio seleccionado
          &:has(input[type="radio"]:checked) {
            border-color: $primary-color;
            background: rgba($primary-color, 0.1);
          }
        }
      }
      
      .description-input {
        margin-top: $spacing-md;
        
        input,
        textarea {
          @include input-base;
          padding: $spacing-md;
          margin-bottom: $spacing-sm;
          
          &:focus {
            background-color: $white;
          }
        }
        
        .allergy-description,
        .surgery-description,
        .supplements-description,
        .studies-description {
          width: 100%;
        }
        
        small {
          color: $text-secondary;
          font-size: $font-size-sm;
        }
      }
      
      .surgery-details {
        margin-top: $spacing-md;
        @include flex(column);
        gap: $spacing-md;
        
        .date-input {
          label {
            display: block;
            color: $text-primary;
            font-weight: $font-weight-medium;
            margin-bottom: $spacing-sm;
            font-size: $font-size-sm;
          }
          
          input {
            @include input-base;
            padding: $spacing-md;
          }
        }
      }
      
      // Historial familiar
      .family-history-section {
        .family-history-item {
          @include flex(row, flex-start, center);
          gap: $spacing-md;
          margin-bottom: $spacing-md;
          padding: $spacing-md;
          background: $gray-50;
          border-radius: $border-radius-md;
          
          @include mobile {
            @include flex(column);
            gap: $spacing-sm;
          }
          
          .relationship-select,
          .condition-input {
            @include input-base;
            padding: $spacing-sm;
            flex: 1;
            
            @include mobile {
              width: 100%;
            }
          }
          
          .remove-btn {
            background: $danger-color;
            color: $white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            @include flex(center, center);
            cursor: pointer;
            @include transition(all);
            
            &:hover {
              background: darken($danger-color, 10%);
              transform: scale(1.1);
            }
          }
        }
        
        .add-family-btn {
          @include button-base;
          background: $info-color;
          color: $white;
          padding: $spacing-sm $spacing-md;
          font-size: $font-size-sm;
          @include flex(row, center, center);
          gap: $spacing-sm;
          
          &:hover {
            background: darken($info-color, 10%);
            transform: translateY(-1px);
          }
        }
      }
      
      // Tratamientos reductivos
      .treatment-details {
        margin-top: $spacing-md;
        
        .time-options {
          @include flex(row, flex-start, center, wrap);
          gap: $spacing-md;
          
          @include mobile {
            @include flex(column);
            gap: $spacing-sm;
          }
          
          .time-option {
            @include flex(row, flex-start, center);
            gap: $spacing-sm;
            cursor: pointer;
            padding: $spacing-sm $spacing-md;
            border: 2px solid $border-color;
            border-radius: $border-radius-md;
            @include transition(all);
            
            &:hover {
              border-color: $secondary-color;
              background: rgba($secondary-color, 0.05);
            }
            
            input[type="radio"] {
              accent-color: $secondary-color;
            }
            
            span {
              color: $text-primary;
              font-size: $font-size-sm;
            }
          }
        }
      }
      
      // Archivo upload
      .file-upload-section {
        margin-top: $spacing-md;
        
        .upload-btn {
          @include button-base;
          background: $gray-600;
          color: $white;
          padding: $spacing-sm $spacing-md;
          font-size: $font-size-sm;
          @include flex(row, center, center);
          gap: $spacing-sm;
          
          &:hover {
            background: $gray-700;
            transform: translateY(-1px);
          }
        }
      }
    }
  }
}

// Sección de acciones del formulario (igual que en Goals)
.form-actions {
  @include flex(row, space-between, center);
  margin-top: $spacing-xxl;
  
  @include mobile {
    @include flex(column, center, stretch);
    gap: $spacing-lg;
  }
  
  .save-progress {
    @include flex(column, center, center);
    text-align: center;
    
    span {
      color: $text-secondary;
      font-size: $font-size-sm;
      margin-bottom: $spacing-sm;
    }
    
    .save-btn {
      background: linear-gradient(135deg, $info-color 0%, #6f42c1 100%);
      color: $white;
      border: none;
      padding: $spacing-sm $spacing-lg;
      border-radius: $border-radius-lg;
      cursor: pointer;
      font-size: $font-size-sm;
      font-weight: $font-weight-medium;
      @include transition(all);
      
      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba($info-color, 0.3);
      }
    }
  }
  
  .continue-btn {
    @include button-primary;
    font-size: $font-size-lg;
    padding: $spacing-lg $spacing-xxl;
    
    @include mobile {
      width: 100%;
      padding: $spacing-md $spacing-xl;
      font-size: $font-size-base;
    }
  }
}